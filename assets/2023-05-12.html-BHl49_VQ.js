import{_ as l}from"./hero-CbGtQ2Lh.js";import{_ as i,r as s,o as c,c as p,b as a,d as e,e as o,a as n}from"./app-P3E1jSxo.js";const h={},d=n('<p><img src="'+l+'" alt="Logo"></p><h1 id="this-week-in-mojo-2023-05-12" tabindex="-1"><a class="header-anchor" href="#this-week-in-mojo-2023-05-12"><span>This Week in Mojo 2023-05-12</span></a></h1><h2 id="mojo-playground-release" tabindex="-1"><a class="header-anchor" href="#mojo-playground-release"><span>Mojo Playground Release</span></a></h2>',3),m={href:"https://docs.modular.com/mojo/changelog.html#week-of-2023-05-01",target:"_blank",rel:"noopener noreferrer"},u={href:"https://docs.modular.com/mojo/changelog.html#week-of-2023-05-08",target:"_blank",rel:"noopener noreferrer"},f=n(`<h3 id="inout" tabindex="-1"><a class="header-anchor" href="#inout"><span>inout</span></a></h3><p>The <code>inout</code> keyword replaces <code>&amp;</code> postfix to declare a mutable reference, <code>self&amp;</code> is now <code>inout self</code>:</p><div class="language-text" data-ext="text" data-title="text"><pre class="shiki tokyo-night" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span>struct MyVal:</span></span>
<span class="line"><span>    var val: Int</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    fn __init__(inout self, val: Int):</span></span>
<span class="line"><span>        self.val = val</span></span>
<span class="line"><span></span></span></code></pre></div><p><code>inout</code> will be familiar to Swift programmers, any mutations <code>in</code> the function will persist <code>out</code> of the function.</p>`,4),g={href:"https://github.com/modularml/mojo/issues/7",target:"_blank",rel:"noopener noreferrer"},y={href:"https://github.com/modularml/mojo/discussions/105",target:"_blank",rel:"noopener noreferrer"},b=a("code",null,"&",-1),_=a("code",null,"inout",-1),w=n(`<h3 id="generic-parameters" tabindex="-1"><a class="header-anchor" href="#generic-parameters"><span>Generic parameters</span></a></h3><p>Generic parameters would previously crash notebooks, this now works:</p><div class="language-mojo" data-ext="mojo" data-title="mojo"><pre class="shiki tokyo-night" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#BB9AF7;">struct</span><span style="color:#A9B1D6;"> Multi</span><span style="color:#9ABDF5;">[</span><span style="color:#A9B1D6;">T</span><span style="color:#89DDFF;">:</span><span style="color:#A9B1D6;"> AnyType</span><span style="color:#9ABDF5;">]</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#9D7CD8;font-style:italic;">    var</span><span style="color:#C0CAF5;"> x</span><span style="color:#89DDFF;">:</span><span style="color:#A9B1D6;"> T</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BB9AF7;">    fn</span><span style="color:#0DB9D7;"> __init__</span><span style="color:#9ABDF5;">(</span><span style="color:#9D7CD8;font-style:italic;">inout</span><span style="color:#E0AF68;"> self</span><span style="color:#89DDFF;">,</span><span style="color:#E0AF68;"> x</span><span style="color:#89DDFF;">:</span><span style="color:#A9B1D6;"> T</span><span style="color:#9ABDF5;">):</span></span>
<span class="line"><span style="color:#F7768E;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#A9B1D6;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A9B1D6;"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9D7CD8;font-style:italic;">let</span><span style="color:#C0CAF5;"> x</span><span style="color:#89DDFF;"> =</span><span style="color:#7AA2F7;"> Multi</span><span style="color:#9ABDF5;">(</span><span style="color:#FF9E64;">10</span><span style="color:#9ABDF5;">)</span></span>
<span class="line"><span style="color:#9D7CD8;font-style:italic;">let</span><span style="color:#C0CAF5;"> y</span><span style="color:#89DDFF;"> =</span><span style="color:#7AA2F7;"> Multi</span><span style="color:#9ABDF5;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ECE6A;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ABDF5;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="mojo-team-content" tabindex="-1"><a class="header-anchor" href="#mojo-team-content"><span>Mojo Team Content</span></a></h2>`,4),v={href:"https://www.modular.com/team/tim-davis",target:"_blank",rel:"noopener noreferrer"},k={href:"https://www.modular.com/blog/our-launch-whats-next",target:"_blank",rel:"noopener noreferrer"},D={href:"https://www.modular.com/team/scott-main",target:"_blank",rel:"noopener noreferrer"},F={href:"https://docs.modular.com/mojo/programming-manual.html#argument-passing-control-and-memory-ownership",target:"_blank",rel:"noopener noreferrer"},j=a("h2",{id:"community-content",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#community-content"},[a("span",null,"Community Content")])],-1),x={href:"https://github.com/crisadamo/mojo-lang-syntax",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/crisadamo/mojo-lang-syntax",target:"_blank",rel:"noopener noreferrer"},C={href:"https://github.com/czheo/mojo.vim",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/czheo/mojo.vim",target:"_blank",rel:"noopener noreferrer"},M={href:"https://www.youtube.com/watch?v=yovCqxZalJU",target:"_blank",rel:"noopener noreferrer"},B={href:"https://www.youtube.com/watch?v=yovCqxZalJU?t=483",target:"_blank",rel:"noopener noreferrer"},S={href:"https://fireship.io",target:"_blank",rel:"noopener noreferrer"},I={href:"https://www.youtube.com/watch?v=V4gGJ7XXlC0&t=3s",target:"_blank",rel:"noopener noreferrer"},E={href:"https://www.youtube.com/watch?v=RZhTC33lStQ",target:"_blank",rel:"noopener noreferrer"},q=n('<h2 id="new-mojo-team-answers" tabindex="-1"><a class="header-anchor" href="#new-mojo-team-answers"><span>New Mojo Team Answers</span></a></h2><h3 id="thread-safety" tabindex="-1"><a class="header-anchor" href="#thread-safety"><span>Thread Safety</span></a></h3><p>A borrowed argument is <code>safe to share</code>. It isn&#39;t enforced yet, but the model is that a borrowed argument can never alias a mutable reference.</p><p>Mojo provides the same model as Rust, which is <code>mutable XOR sharing</code> model. If you have a mutable reference to something, it is known to be unique. You can have many immutable references though.</p><h3 id="actor-model" tabindex="-1"><a class="header-anchor" href="#actor-model"><span>Actor Model</span></a></h3>',5),L={href:"https://gist.github.com/lattner/31ed37682ef1576b16bca1432ea9f782",target:"_blank",rel:"noopener noreferrer"},R={href:"https://docs.swift.org/swift-book/documentation/the-swift-programming-language/concurrency/",target:"_blank",rel:"noopener noreferrer"},W=n('<p>You don&#39;t need to convince me of the value of actors, Carl Hewitt already did ðŸ™‚</p><h3 id="leading-underscore-foo-for-private-members" tabindex="-1"><a class="header-anchor" href="#leading-underscore-foo-for-private-members"><span>Leading underscore <code>_foo</code> for private members</span></a></h3><p>This is a very clear extension we could consider, highly precedented of course. In the immediate future we are focusing on building the core systems programming features in the roadmap. When that is complete, we can consider &quot;general goodness&quot; features like this.</p><h3 id="wasm-support" tabindex="-1"><a class="header-anchor" href="#wasm-support"><span>WASM Support</span></a></h3><p>The Mojo stack is perfectly set up to do this. It doesn&#39;t use garbage collection, supports very small installed binaries etc. It&#39;ll be great, we just need to make a bit more progress ðŸ˜„</p><h3 id="global-variables" tabindex="-1"><a class="header-anchor" href="#global-variables"><span>Global Variables</span></a></h3><p>Both <code>def</code> and <code>fn</code> cannot access variables outside their scope because Mojo as a language doesn&#39;t have proper global variables yet, this is a known missing feature.</p><h3 id="float-literals" tabindex="-1"><a class="header-anchor" href="#float-literals"><span>Float Literals</span></a></h3>',8),P=a("code",null,"FloatLiteral",-1),V=a("code",null,"Float64",-1),G={href:"https://github.com/modularml/mojo/issues/115",target:"_blank",rel:"noopener noreferrer"},N=n(`<h3 id="type-erasure-for-python-support" tabindex="-1"><a class="header-anchor" href="#type-erasure-for-python-support"><span>Type Erasure for Python Support</span></a></h3><p>This currently doesn&#39;t work in Mojo as it does in Python:</p><div class="language-python" data-ext="py" data-title="py"><pre class="shiki tokyo-night" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#A9B1D6;">a </span><span style="color:#89DDFF;">=</span><span style="color:#FF9E64;"> 9</span></span>
<span class="line"><span style="color:#0DB9D7;">print</span><span style="color:#9ABDF5;">(</span><span style="color:#C0CAF5;">a</span><span style="color:#9ABDF5;">)</span></span>
<span class="line"><span style="color:#A9B1D6;">a </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#9ECE6A;">Hello</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#0DB9D7;">print</span><span style="color:#9ABDF5;">(</span><span style="color:#C0CAF5;">a</span><span style="color:#9ABDF5;">)</span></span>
<span class="line"></span></code></pre></div><p>I agree we need to decide what the model is. This <strong>must</strong> work, at least in a <code>def</code>, for python compatibility. <code>def</code> currently allows implicit declaration, but infer the type from the first assignment. The above implies that implicitly declared variables in a <code>def</code> should default to having object type (which type erases the concrete type and will allow the above).</p><p>I think this is the right/unavoidable thing to do, but I have two concerns:</p><p>We don&#39;t really have the language features in place to implement object correctly (notably need the basics of classes), so I&#39;d like to avoid switching to this model until we can make it work right.</p>`,6),J=a("code",null,"AnyObject",-1),z=a("code",null,"id",-1),O={href:"https://github.com/apple/swift-evolution/blob/main/proposals/0116-id-as-any.md",target:"_blank",rel:"noopener noreferrer"},Z=n('<p>These are super nuanced issues and I&#39;d like to get more experience with the core language before touching into this. There is a big difference between bringing up something simple and building it really great.</p><h3 id="compile-to-shared-library" tabindex="-1"><a class="header-anchor" href="#compile-to-shared-library"><span>Compile to Shared Library</span></a></h3><p>Yes, it can be compiled as a shared library, no problem. We&#39;re not prioritizing this right now, but we&#39;ll enable this at some point</p><h3 id="mutable-reference-vs-mutable-referee" tabindex="-1"><a class="header-anchor" href="#mutable-reference-vs-mutable-referee"><span>Mutable Reference vs Mutable Referee</span></a></h3><p>An <code>immutable reference</code> can still have a <code>mutable referee</code>, this is equivalent to the difference between <code>const int*</code> and <code>int* const</code> in C.</p>',5);function H(U,X){const t=s("ExternalLinkIcon"),r=s("CommentService");return c(),p("div",null,[d,a("p",null,[e("The changes from "),a("a",m,[e("week ending 2023-05-01"),o(t)]),e(" and "),a("a",u,[e("week ending 2023-05-08"),o(t)]),e(" have been released to the Mojo Playground with highlights:")]),f,a("p",null,[e("See justification for the naming of the keyword "),a("a",g,[e("here"),o(t)]),e(" and "),a("a",y,[e("here"),o(t)]),e(". To summarize "),b,e(" is a heavily overloaded character, while "),_,e(" describes exactly what's happening.")]),w,a("ul",null,[a("li",null,[a("a",v,[e("Tim Davis"),o(t)]),e(" released a "),a("a",k,[e("blog post"),o(t)]),e(" on the launch and what's next")]),a("li",null,[a("a",D,[e("Scott Main"),o(t)]),e(" added a section to the programming manual on "),a("a",F,[e("memory ownership"),o(t)]),e(" that clarifies value and reference semantics in Mojo.")])]),j,a("ul",null,[a("li",null,[e("Github user "),a("a",x,[e("crisadamo"),o(t)]),e(" has released a VS Code extension for syntax highlighting: "),a("a",A,[e("mojo-lang-syntax"),o(t)]),e(" while we wait for the official language extension.")]),a("li",null,[e("Github user "),a("a",C,[e("https://github.com/czheo"),o(t)]),e(" released a "),a("a",T,[e("vim plugin"),o(t)]),e(" for syntax highlighting")]),a("li",null,[e("Telukso did a video where he experimented with "),a("a",M,[e("the Mojo playground"),o(t)]),e(" and the matmul notebook, giving a nice visual for matrix multiplication before diving in "),a("a",B,[e("starting at 8:08"),o(t)])]),a("li",null,[e("Jeff Delaney responsible for "),a("a",S,[e("fireship.io"),o(t)]),e(" released a "),a("a",I,[e("meme filled video about Mojo"),o(t)])]),a("li",null,[e("The Primagen who mixes comedy and tech "),a("a",E,[e("did a reaction video"),o(t)]),e(" to Jeremy Howard's launch demo")])]),q,a("p",null,[e(`We only have "ideas" not "plans" here. I'm a fan of actors, having designed/built out a system for swift a few years ago. I think an evolved version of that would compose well and will fit nicely into our system. I think we'll want a Mutex abstraction and classes first though. See `),a("a",L,[e("Swift Concurrency Manifesto"),o(t)]),e(" and "),a("a",R,[e("Swift Concurrency Docs"),o(t)])]),W,a("p",null,[P,e(" is backed by "),V,e(" but the Mojo Playground is currently only printing to 6 decimal places. "),a("a",G,[e("Feature request added here"),o(t)]),e(" to print all significant digits.")]),N,a("p",null,[e(`This push us to define/create the "type erasure of structs to object" model so that user defined struct types can be used here. We may or may not want to do this, it isn't clear to me. There is a lot of precedent in this in the Swift world where Swift classes can be typed erased to `),J,e(" (aka "),z,e(" in ObjC) and that "),a("a",O,[e("allow dynamic dispatch in various ways"),o(t)])]),Z,o(r)])}const K=i(h,[["render",H],["__file","2023-05-12.html.vue"]]),$=JSON.parse('{"path":"/this-week-in-mojo/2023-05-12.html","title":"This Week in Mojo 2023-05-12","lang":"en-US","frontmatter":{"title":"This Week in Mojo 2023-05-12","date":"2023-05-12T00:00:00.000Z","author":"Mojo Dojo","author_site":"https://mojodojo.dev","author_image":"https://mojodojo.dev/hero.png","feed":true},"headers":[{"level":2,"title":"Mojo Playground Release","slug":"mojo-playground-release","link":"#mojo-playground-release","children":[{"level":3,"title":"inout","slug":"inout","link":"#inout","children":[]},{"level":3,"title":"Generic parameters","slug":"generic-parameters","link":"#generic-parameters","children":[]}]},{"level":2,"title":"Mojo Team Content","slug":"mojo-team-content","link":"#mojo-team-content","children":[]},{"level":2,"title":"Community Content","slug":"community-content","link":"#community-content","children":[]},{"level":2,"title":"New Mojo Team Answers","slug":"new-mojo-team-answers","link":"#new-mojo-team-answers","children":[{"level":3,"title":"Thread Safety","slug":"thread-safety","link":"#thread-safety","children":[]},{"level":3,"title":"Actor Model","slug":"actor-model","link":"#actor-model","children":[]},{"level":3,"title":"Leading underscore _foo for private members","slug":"leading-underscore-foo-for-private-members","link":"#leading-underscore-foo-for-private-members","children":[]},{"level":3,"title":"WASM Support","slug":"wasm-support","link":"#wasm-support","children":[]},{"level":3,"title":"Global Variables","slug":"global-variables","link":"#global-variables","children":[]},{"level":3,"title":"Float Literals","slug":"float-literals","link":"#float-literals","children":[]},{"level":3,"title":"Type Erasure for Python Support","slug":"type-erasure-for-python-support","link":"#type-erasure-for-python-support","children":[]},{"level":3,"title":"Compile to Shared Library","slug":"compile-to-shared-library","link":"#compile-to-shared-library","children":[]},{"level":3,"title":"Mutable Reference vs Mutable Referee","slug":"mutable-reference-vs-mutable-referee","link":"#mutable-reference-vs-mutable-referee","children":[]}]}],"filePathRelative":"this-week-in-mojo/2023-05-12.md","git":{"createdTime":1692819390000,"updatedTime":1692819390000}}');export{K as comp,$ as data};
